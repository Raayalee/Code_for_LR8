<?xml version="1.0" encoding="UTF-8"?>
<Configuration status="INFO">

    <Appenders>

        <!-- Логування у файл: INFO, WARN, ERROR -->
        <File name="FileLogger"
              fileName="logs/application.log"
              append="true">
            <Filters>
                <ThresholdFilter level="INFO"
                                 onMatch="ACCEPT"
                                 onMismatch="DENY"/>
            </Filters>
            <PatternLayout pattern="%d{yyyy-MM-dd HH:mm:ss} %-5level %c - %msg%n"/>
        </File>

        <!-- Надсилання ТІЛЬКИ критичних помилок -->
        <SMTP name="EmailLogger"
              subject="CRITICAL ERROR in application"
              to="test@example.com"
              from="log4j@test.com"
              smtpHost="sandbox.smtp.mailtrap.io"
              smtpPort="25"
              smtpProtocol="smtp"
              smtpUsername="d055b68e45223c"
              smtpPassword="5e5f4602835216"
              smtpDebug="false">

            <Filters>
                <ThresholdFilter level="ERROR"
                                 onMatch="ACCEPT"
                                 onMismatch="DENY"/>
            </Filters>

            <PatternLayout pattern="%d{yyyy-MM-dd HH:mm:ss} %-5level %c - %msg%n"/>
        </SMTP>

    </Appenders>

    <Loggers>
        <Root level="INFO">
            <AppenderRef ref="FileLogger"/>
            <AppenderRef ref="EmailLogger"/>
        </Root>
    </Loggers>

</Configuration>
